    1  vi kops.sh
    2  sh kops.sh 
    3  aws configure
    4  kops create cluster --name=mykube.k8s.local --state=s3://mykops1234 --zones=ap-south-1a --node-count=2 --node-size=t2.medium --master-size=t2.medium --yes
    5  mkdir myapp
    6  cd myapp/
    7  ls
    8  cd
    9  vi .bashrc 
   10  source .bashrc 
   11  cd myapp/
   12  kubectl run test-pod --image nginx:latest --port 80 --dry-run=client -o yaml
   13  kops validate cluster --name mykube.k8s.local --state=s3://mykops1234
   14  kubectl run test-pod --image nginx:latest --port 80 --dry-run=client -o yaml
   15  kubectl run test-pod --image nginx:latest --port 80 --dry-run=client -o yaml > pod.yaml
   16  vi pod.yaml 
   17  kops validate cluster --name mykube.k8s.local --state=s3://mykops1234
   18  kubectl create -f pod.yaml 
   19  kubectl get pod
   20  kubectl describe pod mypod 
   21  kubectl get pod
   22  kubectl get nodes
   23  kubectl get pod -o wide
   24  kubectl describe pod mypod 
   25  kubectl get pod 
   26  kubectl get pod --show-labels 
   27  kubectl expose pod mypod --type NodePort --dry-run=client -o yaml
   28  kubectl expose pod mypod --type NodePort --dry-run=client -o yaml >> pod.yaml 
   29  vi pod.yaml 
   30  kubectl expose pod mypod --type NodePort --dry-run=client -o yaml > svc.yaml
   31  vi svc.yaml 
   32  kubectl get svc
   33  vi svc.yaml 
   34  kubectl create -f svc.yaml 
   35  kubectl get svc
   36  vi svc.yaml 
   37  kubectl create -f svc.yaml 
   38  kubectl delete -f svc.yaml 
   39  vi svc.yaml 
   40  kubectl create -f svc.yaml 
   41  kubectl get svc
   42  kubectl delete -f svc.yaml 
   43  kubectl create -f svc.yaml 
   44  kubectl get svc
   45  vi svc.yaml 
   46  kubectl get pod
   47  kubectl get po
   48  kubectl get pods
   49  ls
   50  cp pod.yaml svc.yaml /home/ubuntu/
   51  vi pod.yaml 
   52  kubectl get pod
   53  vi pod.yaml 
   54  kubectl get pod
   55  vi pod.yaml 
   56  kubectl describe pod mypod 
   57  vi pod.yaml 
   58  kubectl get pod
   59  kubectl describe pod mypod 
   60  kubectl get nodes
   61  cp pod.yaml man-schedule.yaml
   62  vi man-schedule.yaml 
   63  kubectl get pod -o wide
   64  vi man-schedule.yaml 
   65  kubectl create -f man-schedule.yaml 
   66  vi man-schedule.yaml 
   67  kubectl c
   68  vi man-schedule.yaml 
   69  kubectl get pod -o wide
   70  kubectl describe pod man-pod 
   71  kubectl get pod -o wide
   72  kubectl delete -f man-schedule.yaml 
   73  vi man-schedule.yaml 
   74  kubectl create -f man-schedule.yaml 
   75  kubectl get pod -o wide
   76  kubectl describe pod man-pod 
   77  kubectl get pod -o wide
   78  vi man-schedule.yaml 
   79  kubectl get nodes
   80  vi pod.yaml 
   81  vi svc.yaml 
   82  vi pod.yaml 
   83  vi man-schedule.yaml 
   84  kubectl get nodes --show-labels 
   85  kubectl get nodes 
   86  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen
   87  kubectl get nodes --show-labels 
   88  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen, memory=16
   89  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen, memory=best
   90  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen
   91  kubectl get nodes --show-labels 
   92  kubectl get nodes --show-labels | grep cpu=
   93  kubectl get nodes --show-labels | grep cpu=ryzen
   94  cp pod.yaml node-sel.yaml
   95  vi node-sel.yaml 
   96  kubectl create -f node-sel.yaml 
   97  vi pod.yaml 
   98  vi node-sel.yaml 
   99  kubectl create -f node-sel.yaml 
  100  kubectl get pod
  101  kubectl describe pod pod-nodesel 
  102  kubectl get pod
  103  kubectl get nodes
  104  kubectl delete -f node-sel.yaml 
  105  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu-
  106  kubectl create -f node-sel.yaml 
  107  kubectl get pod
  108  kubectl describe pod pod-nodesel 
  109  kubectl get pod
  110  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen
  111  kubectl get pod
  112  history 
  113  cd ..
  114  mv myapp/ /home/ubuntu/
  115  cd /home/ubuntu/myapp/
  116  ls
  117  history 
  118  vi man-schedule.yaml 
  119  kubectl get nodes
  120  vi pod.yaml 
  121  vi node-sel.yaml 
  122  cp pod.yaml nodeaffpref.yaml
  123  kubectl get nodes --show-labels 
  124  vi pod.yaml 
  125  vi nodeaffpref.yaml 
  126  kubectl create -f nodeaffpref.yaml 
  127  kubectl get pod
  128  kubectl get nodes --show-labels | grep cpu
  129  kubectl get pod -o wide
  130  vi nodeaffpref.yaml 
  131  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu-
  132  kubectl get pod
  133  kubectl create -f nodeaffpref.yaml 
  134  kubectl delete -f nodeaffpref.yaml 
  135  kubectl create -f nodeaffpref.yaml 
  136  kubectl get pod
  137  kubectl get nodes --show-labels | grep cpu=ryzen
  138  kubectl get pod -o wide
  139  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen
  140  cp nodeaffpref.yaml node-Anti-aff-pref.yaml 
  141  vi node-Anti-aff-pref.yaml 
  142  kubectl create -f node-Anti-aff-pref.yaml
  143  kubectl get pod -o wide
  144  kubectl get nodes --show-labels | grep cpu=ryzen
  145  kubectl get nodes --selector cpu=ryzen
  146  cd ..
  147  cd
  148  mkdir myapp
  149  ls
  150  cd myapp/
  151  ls
  152  git clone https://github.com/aneeshansaricloud/CT-new.git
  153  ls
  154  cd CT-new/
  155  ls
  156  git remote add git@github.com:aneeshansaricloud/CT-new.git
  157  git remote add origin git@github.com:aneeshansaricloud/CT-new.git
  158  git remote remove origin 
  159  git remote add origin git@github.com:aneeshansaricloud/CT-new.git
  160  git remote 
  161  git remote --help
  162  ls
  163  ssh-keygen 
  164  cd 
  165  cd .ssh/
  166  ls
  167  cat tid_rsa
  168  cat id_rsa
  169  cat id_rsa.pub 
  170  cd 
  171  cd myapp/CT-new/
  172  ls
  173  touch test.yaml
  174  ls
  175  cd
  176  cd .ssh/
  177  ls
  178  rm id*
  179  ls
  180  cd
  181  cd myapp/CT-new/
  182  #ssh-keygen -t ed25519 -C "aneeshansaricloud@gmail.com"
  183  ssh-keygen -t ed25519 -C "aneeshansaricloud@gmail.com"
  184  eval "$(ssh-agent -s)"
  185  cd
  186  cd .ssh/
  187  ls
  188  ca t id_ed25519.pub 
  189  cat id_ed25519.pub 
  190  cd 
  191  cd myapp/CT-new/
  192  git add .
  193  git commit -m "abc"
  194  git config --global --edit
  195  git commit -m "abc"
  196  git push -u origin
  197  git branch -M 
  198  git branch -M main
  199  git push origin main
  200  ls
  201  vi gitt.sh
  202  ci test.yaml 
  203  vi test.yaml 
  204  sh gitt.sh abc
  205  ls
  206  vi pod.yaml node-aff-req.yaml
  207  cp pod.yaml node-aff-req.yaml
  208  vi node-aff-req.yaml
  209  kubectl create -f node-aff-req.yaml
  210  vi node-aff-req.yaml
  211  kubectl create -f node-aff-req.yaml
  212  kubectl get pod
  213  kubectl get pod -o wide
  214  kubectl get nodes --show-labels | grep cpu
  215  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu-
  216  kubectl get pod -o wide
  217  kubectl delete -f node-aff-req.yaml 
  218  kubectl get pod -o wide
  219  kubectl create -f node-aff-req.yaml 
  220  kubectl get pod -o wide
  221  kubectl label nodes ip-172-20-45-111.ap-south-1.compute.internal cpu=ryzen
  222  kubectl get pod -o wide
  223  vi node-aff-req.yaml 
  224  kubectl get pod -o wide
  225  kubectl delete pod node-aff-req
  226  kubectl create -f node-aff-req.yaml 
  227  kubectl get pod -o wide
  228  kubectl get nodes --show-labels | grep cpu
  229  vi node-aff-req.yaml 
  230  cd myapp/CT-new/
  231  ls
  232  vi pod-aff-pre.yaml
  233  cp pod.yaml pod-aff-pre.yaml
  234  vi pod-aff-pre.yaml
  235  kubectl get pod
  236  kubectl delete -f .
  237  kubectl get pod
  238  vi pod.yaml 
  239  kubectl create -f pod.yaml 
  240  kubectl get pod -o wide
  241  vi pod-aff-pre.yaml 
  242  kubectl get pod --show-labels 
  243  vi pod-aff-pre.yaml 
  244  kubectl get nodes 
  245  kubectl get nodes --show-labels 
  246  vi pod-aff-pre.yaml 
  247  kubectl create -f pod-aff-pre.yaml 
  248  vi pod-aff-pre.yaml 
  249  kubectl create -f pod-aff-pre.yaml 
  250  kubectl get pod -o wide
  251  kubectl delete -f pod-aff-pre.yaml 
  252  vi pod-aff-pre.yaml 
  253  cp pod-aff-pre.yaml pod-anti-aff-pre.yaml 
  254  vi pod-anti-aff-pre.yaml 
  255  kubectl create -f pod-anti-aff-pre.yaml 
  256  kubectl get pod -o wide
  257  ls
  258  sh gitt.sh abc
  259  kubectl get nodes
  260  kubectl describe nodes ip-172-20-60-238.ap-south-1.compute.internal
  261  kubectl describe nodes ip-172-20-60-238.ap-south-1.compute.internal | grep "Taint"
  262  kubectl get nodes
  263  kubectl describe nodes ip-172-20-60-238.ap-south-1.compute.internal | grep "Taint"
  264  kubectl describe nodes ip-172-20-51-211.ap-south-1.compute.internal | grep "Taint"
  265  kubectl describe nodes ip-172-20-45-111.ap-south-1.compute.internal | grep "Taint"
  266  cd myapp/CT-new/
  267  ls
  268  history > cmd.txt 
  269  ./gitt.sh "cmd"
  270  vi replicaset.yaml 
  271  history > cmd.txt 
kubectl get replicasets.apps

 kubectl get replicationcontrollers
kubectl scale replicaset myrs --replicas 5
